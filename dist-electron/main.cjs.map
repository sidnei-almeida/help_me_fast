{
  "version": 3,
  "sources": ["../electron/main.ts"],
  "sourcesContent": ["import { app, BrowserWindow, ipcMain, dialog } from 'electron'\nimport path from 'path'\nimport { promises as fs } from 'fs'\nimport { existsSync } from 'fs'\n\n// \u2500\u2500\u2500 Environment detection \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nconst isDev = !app.isPackaged\n\n/** Production-safe logger \u2014 only logs in dev mode */\nfunction log(...args: unknown[]) {\n  if (isDev) console.log(...args)\n}\nfunction logError(...args: unknown[]) {\n  // Always log errors (stderr), but with context\n  console.error(...args)\n}\n\n// \u2500\u2500\u2500 Wayland / X11 compatibility \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n// Electron needs hints to run properly on Wayland (GNOME 41+, KDE Plasma 6, Hyprland, Sway)\n// --ozone-platform-hint=auto lets Electron auto-detect the display server\n// This must be set BEFORE app.whenReady()\nif (process.platform === 'linux') {\n  // Auto-detect Wayland vs X11 \u2014 works on GNOME, KDE, Hyprland, Sway, i3, etc.\n  app.commandLine.appendSwitch('ozone-platform-hint', 'auto')\n\n  // Enable Wayland input method support (for non-Latin keyboard layouts)\n  app.commandLine.appendSwitch('enable-wayland-ime')\n\n  // GPU acceleration fixes for some Linux configurations\n  // If the user has issues, they can set ELECTRON_DISABLE_GPU=1\n  if (process.env.ELECTRON_DISABLE_GPU === '1') {\n    app.disableHardwareAcceleration()\n  }\n}\n\n// \u2500\u2500\u2500 Window creation \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nfunction createWindow() {\n  const preloadPath = path.join(__dirname, 'preload.cjs')\n\n  log('[Main] __dirname:', __dirname)\n  log('[Main] preloadPath:', preloadPath)\n  log('[Main] preload exists:', existsSync(preloadPath))\n\n  if (!existsSync(preloadPath)) {\n    logError('[Main] FATAL: preload.cjs not found at', preloadPath)\n    app.quit()\n    return\n  }\n\n  // Detect if running under Wayland \u2014 some WMs handle frameless differently\n  const isWayland = !!(\n    process.env.WAYLAND_DISPLAY ||\n    process.env.XDG_SESSION_TYPE === 'wayland'\n  )\n  log('[Main] Display server:', isWayland ? 'Wayland' : 'X11')\n\n  const mainWindow = new BrowserWindow({\n    width: 1200,\n    height: 800,\n    minWidth: 800,\n    minHeight: 600,\n    frame: false,\n    // Fallback: if frame:false causes issues on some DEs, titleBarStyle works more reliably\n    // titleBarStyle: 'hidden',  // Alternative for problematic DEs\n    webPreferences: {\n      preload: preloadPath,\n      nodeIntegration: false,\n      contextIsolation: true,\n      sandbox: false,\n      // Security: disable remote module\n      enableRemoteModule: false,\n    } as any,\n    autoHideMenuBar: true,\n    // Transparent background prevents white flash on load\n    backgroundColor: '#F2F2F7',\n    show: false, // Don't show until ready \u2014 prevents flash\n  })\n\n  // Show window when renderer is ready (prevents white flash)\n  mainWindow.once('ready-to-show', () => {\n    mainWindow.show()\n    if (isDev) {\n      mainWindow.webContents.openDevTools({ mode: 'detach' })\n    }\n  })\n\n  mainWindow.webContents.on('preload-error', (_event, _preloadPath, error) => {\n    logError('[Main] Preload error:', error)\n  })\n\n  // \u2500\u2500 Window control IPC handlers \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  ipcMain.on('window:minimize', () => {\n    mainWindow.minimize()\n  })\n\n  ipcMain.on('window:maximize', () => {\n    if (mainWindow.isMaximized()) {\n      mainWindow.unmaximize()\n    } else {\n      mainWindow.maximize()\n    }\n  })\n\n  ipcMain.on('window:close', () => {\n    mainWindow.close()\n  })\n\n  ipcMain.handle('window:is-maximized', () => {\n    return mainWindow.isMaximized()\n  })\n\n  // Notify renderer when maximize state changes\n  mainWindow.on('maximize', () => {\n    mainWindow.webContents.send('window:maximized-changed', true)\n  })\n  mainWindow.on('unmaximize', () => {\n    mainWindow.webContents.send('window:maximized-changed', false)\n  })\n\n  // \u2500\u2500 Load content \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  if (isDev) {\n    mainWindow.loadURL('http://localhost:5173')\n  } else {\n    mainWindow.loadFile(path.join(__dirname, '../dist/index.html'))\n  }\n}\n\n// \u2500\u2500\u2500 Helper: read image file \u2192 data:URI \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nfunction getMime(filePath: string): string {\n  const ext = path.extname(filePath).slice(1).toLowerCase()\n  if (ext === 'jpg' || ext === 'jpeg') return 'image/jpeg'\n  if (ext === 'png') return 'image/png'\n  if (ext === 'webp') return 'image/webp'\n  if (ext === 'gif') return 'image/gif'\n  return 'image/png'\n}\n\nasync function fileToDataURI(filePath: string): Promise<string | null> {\n  try {\n    await fs.access(filePath)\n    const buf = await fs.readFile(filePath)\n    return `data:${getMime(filePath)};base64,${buf.toString('base64')}`\n  } catch {\n    return null\n  }\n}\n\n// \u2500\u2500\u2500 Global Settings (outside vault, in app userData) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nfunction getSettingsPath(): string {\n  return path.join(app.getPath('userData'), 'settings.json')\n}\n\nasync function readSettings(): Promise<{ lastVaultPath?: string }> {\n  try {\n    const content = await fs.readFile(getSettingsPath(), 'utf-8')\n    return JSON.parse(content)\n  } catch {\n    return {}\n  }\n}\n\nasync function writeSettings(data: Record<string, unknown>): Promise<void> {\n  const current = await readSettings()\n  const merged = { ...current, ...data }\n  await fs.writeFile(getSettingsPath(), JSON.stringify(merged, null, 2), 'utf-8')\n}\n\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 IPC Handlers \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nfunction registerIpcHandlers() {\n\n  // \u2500\u2500 Settings: get last vault path \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  ipcMain.handle('settings:get-last-vault', async () => {\n    log('[IPC] settings:get-last-vault called')\n    try {\n      const settings = await readSettings()\n      if (!settings.lastVaultPath) {\n        log('[IPC] No last vault saved')\n        return null\n      }\n\n      // Validate: does the directory still exist?\n      try {\n        const stat = await fs.stat(settings.lastVaultPath)\n        if (!stat.isDirectory()) {\n          log('[IPC] Last vault path is not a directory:', settings.lastVaultPath)\n          return null\n        }\n      } catch {\n        log('[IPC] Last vault path no longer exists:', settings.lastVaultPath)\n        return null\n      }\n\n      // Validate: does it have a config.json (is it actually a vault)?\n      const configPath = path.join(settings.lastVaultPath, 'config.json')\n      try {\n        await fs.access(configPath)\n      } catch {\n        log('[IPC] Last vault path has no config.json:', settings.lastVaultPath)\n        return null\n      }\n\n      log('[IPC] Last vault found and valid:', settings.lastVaultPath)\n      return settings.lastVaultPath\n    } catch (error) {\n      logError('[IPC] settings:get-last-vault error:', error)\n      return null\n    }\n  })\n\n  // \u2500\u2500 Settings: save last vault path \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  ipcMain.handle('settings:set-last-vault', async (_event, vaultPath: string) => {\n    log('[IPC] settings:set-last-vault called:', vaultPath)\n    try {\n      await writeSettings({ lastVaultPath: vaultPath })\n      return { success: true }\n    } catch (error) {\n      logError('[IPC] settings:set-last-vault error:', error)\n      return { success: false, error: (error as Error).message }\n    }\n  })\n\n  // \u2500\u2500 Dialog: select directory \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  ipcMain.handle('dialog:openDirectory', async () => {\n    const result = await dialog.showOpenDialog({\n      properties: ['openDirectory', 'createDirectory'],\n      title: 'Select Vault Folder'\n    })\n    if (result.canceled || result.filePaths.length === 0) return null\n    return result.filePaths[0]\n  })\n\n  // \u2500\u2500 Dialog: select image \u2192 returns base64 data URI for preview \u2500\u2500\u2500\u2500\u2500\u2500\n  ipcMain.handle('dialog:select-image', async () => {\n    log('[IPC] dialog:select-image called')\n    const result = await dialog.showOpenDialog({\n      properties: ['openFile'],\n      title: 'Select Profile Photo',\n      filters: [\n        { name: 'Images', extensions: ['jpg', 'jpeg', 'png', 'gif', 'webp'] }\n      ]\n    })\n    if (result.canceled || result.filePaths.length === 0) return null\n    log('[IPC] Image selected:', result.filePaths[0])\n    return await fileToDataURI(result.filePaths[0])\n  })\n\n  // \u2500\u2500 Avatar: save base64 data to vault as avatar.png \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  ipcMain.handle('vault:save-avatar', async (_event, vaultPath: string, imageData: string) => {\n    log('[IPC] vault:save-avatar called, vaultPath:', vaultPath)\n    try {\n      const base64Match = imageData.match(/^data:image\\/\\w+;base64,(.+)$/)\n      if (!base64Match) {\n        logError('[IPC] vault:save-avatar - Invalid data URI format')\n        return { success: false, error: 'Invalid image data format' }\n      }\n      const imageBuffer = Buffer.from(base64Match[1], 'base64')\n      const avatarFile = path.join(vaultPath, 'avatar.png')\n      await fs.mkdir(vaultPath, { recursive: true })\n      await fs.writeFile(avatarFile, imageBuffer)\n      log('[IPC] Avatar saved to:', avatarFile, '- size:', imageBuffer.length, 'bytes')\n      return { success: true, avatarPath: 'avatar.png' }\n    } catch (error) {\n      logError('[IPC] vault:save-avatar error:', error)\n      return { success: false, error: (error as Error).message }\n    }\n  })\n\n  // \u2500\u2500 Avatar: load from vault \u2192 returns base64 data URI \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  ipcMain.handle('user:load-avatar', async (_event, vaultPath: string) => {\n    log('[IPC] user:load-avatar called, vaultPath:', vaultPath)\n    try {\n      // Read profile.json to find avatar path\n      const profilePath = path.join(vaultPath, 'profile.json')\n      let avatarRelPath: string | null = null\n      try {\n        const content = await fs.readFile(profilePath, 'utf-8')\n        const profile = JSON.parse(content)\n        avatarRelPath = profile.avatar || null\n      } catch {\n        log('[IPC] user:load-avatar - no profile.json found')\n        return null\n      }\n\n      if (!avatarRelPath) {\n        log('[IPC] user:load-avatar - no avatar path in profile')\n        return null\n      }\n\n      const absolutePath = path.isAbsolute(avatarRelPath)\n        ? avatarRelPath\n        : path.join(vaultPath, avatarRelPath)\n\n      const dataURI = await fileToDataURI(absolutePath)\n      log('[IPC] user:load-avatar - result:', dataURI ? `OK (${dataURI.length} chars)` : 'null')\n      return dataURI\n    } catch (error) {\n      logError('[IPC] user:load-avatar error:', error)\n      return null\n    }\n  })\n\n  // \u2500\u2500 Vault: read JSON file \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  ipcMain.handle('vault:read-file', async (_event, filePath: string) => {\n    try {\n      const content = await fs.readFile(filePath, 'utf-8')\n      return { success: true, data: JSON.parse(content) }\n    } catch (error) {\n      return { success: false, error: (error as Error).message }\n    }\n  })\n\n  // \u2500\u2500 Vault: write JSON file \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  ipcMain.handle('vault:write-file', async (_event, filePath: string, data: unknown) => {\n    try {\n      const dir = path.dirname(filePath)\n      await fs.mkdir(dir, { recursive: true })\n      await fs.writeFile(filePath, JSON.stringify(data, null, 2), 'utf-8')\n      return { success: true }\n    } catch (error) {\n      return { success: false, error: (error as Error).message }\n    }\n  })\n\n  // \u2500\u2500 Vault: check file exists \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  ipcMain.handle('vault:file-exists', async (_event, filePath: string) => {\n    try {\n      await fs.access(filePath)\n      return { exists: true }\n    } catch {\n      return { exists: false }\n    }\n  })\n\n  // \u2500\u2500 Vault: initialize \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  ipcMain.handle('vault:init-vault', async (_event, vaultPath: string) => {\n    log('[IPC] vault:init-vault called, path:', vaultPath)\n    try {\n      const configPath = path.join(vaultPath, 'config.json')\n      const profilePath = path.join(vaultPath, 'profile.json')\n      const historyPath = path.join(vaultPath, 'history.json')\n\n      const defaultConfig = {\n        vaultPath,\n        theme: 'dark',\n        notifications: true,\n        dangerZones: [{ start: 18, end: 20 }],\n        weightUnit: 'kg'\n      }\n\n      const defaultProfile = {\n        name: '',\n        weight: 0,\n        height: 0,\n        tmb: 0,\n        age: 0,\n        gender: 'male',\n        activityLevel: 'moderate'\n      }\n\n      const defaultHistory = { fasts: [] }\n\n      await fs.mkdir(vaultPath, { recursive: true })\n\n      const configExists = await fs.access(configPath).then(() => true).catch(() => false)\n      const profileExists = await fs.access(profilePath).then(() => true).catch(() => false)\n      const historyExists = await fs.access(historyPath).then(() => true).catch(() => false)\n\n      if (!configExists) await fs.writeFile(configPath, JSON.stringify(defaultConfig, null, 2), 'utf-8')\n      if (!profileExists) await fs.writeFile(profilePath, JSON.stringify(defaultProfile, null, 2), 'utf-8')\n      if (!historyExists) await fs.writeFile(historyPath, JSON.stringify(defaultHistory, null, 2), 'utf-8')\n\n      log('[IPC] vault:init-vault done')\n      return { success: true }\n    } catch (error) {\n      logError('[IPC] vault:init-vault error:', error)\n      return { success: false, error: (error as Error).message }\n    }\n  })\n\n  // \u2500\u2500 History: add progress entry \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  ipcMain.handle('history:add-entry', async (_event, vaultPath: string, entry: {\n    date: string; weight?: number; photoBase64?: string; notes?: string\n  }) => {\n    log('[IPC] history:add-entry called')\n    try {\n      const historyPath = path.join(vaultPath, 'history.json')\n      \n      // Read existing history\n      let history: any = { fasts: [], progressEntries: [] }\n      try {\n        const content = await fs.readFile(historyPath, 'utf-8')\n        history = JSON.parse(content)\n        if (!history.progressEntries) history.progressEntries = []\n      } catch { /* file doesn't exist yet */ }\n\n      // Generate unique ID\n      const id = `entry_${Date.now()}_${Math.random().toString(36).substring(2, 8)}`\n\n      // Save photo to vault/photos/ if provided\n      let photoPath: string | undefined\n      if (entry.photoBase64) {\n        const photosDir = path.join(vaultPath, 'photos')\n        await fs.mkdir(photosDir, { recursive: true })\n        \n        const base64Match = entry.photoBase64.match(/^data:image\\/(\\w+);base64,(.+)$/)\n        if (base64Match) {\n          const ext = base64Match[1] === 'jpeg' ? 'jpg' : base64Match[1]\n          const fileName = `photo_${Date.now()}.${ext}`\n          const filePath = path.join(photosDir, fileName)\n          await fs.writeFile(filePath, Buffer.from(base64Match[2], 'base64'))\n          photoPath = `photos/${fileName}`\n          log('[IPC] Photo saved:', filePath)\n        }\n      }\n\n      // Create entry\n      const newEntry = {\n        id,\n        date: entry.date,\n        ...(entry.weight !== undefined && { weight: entry.weight }),\n        ...(photoPath && { photoPath }),\n        ...(entry.notes && { notes: entry.notes }),\n      }\n\n      history.progressEntries.push(newEntry)\n\n      // Sort by date descending\n      history.progressEntries.sort((a: any, b: any) => \n        new Date(b.date).getTime() - new Date(a.date).getTime()\n      )\n\n      await fs.writeFile(historyPath, JSON.stringify(history, null, 2), 'utf-8')\n      log('[IPC] Entry added:', newEntry.id)\n      return { success: true, entry: newEntry }\n    } catch (error) {\n      logError('[IPC] history:add-entry error:', error)\n      return { success: false, error: (error as Error).message }\n    }\n  })\n\n  // \u2500\u2500 History: get all entries with photos as base64 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  ipcMain.handle('history:get-all', async (_event, vaultPath: string) => {\n    log('[IPC] history:get-all called')\n    try {\n      const historyPath = path.join(vaultPath, 'history.json')\n      \n      let history: any = { fasts: [], progressEntries: [] }\n      try {\n        const content = await fs.readFile(historyPath, 'utf-8')\n        history = JSON.parse(content)\n        if (!history.progressEntries) history.progressEntries = []\n      } catch {\n        return { success: true, entries: [] }\n      }\n\n      // Inject photoBase64 for each entry that has a photoPath\n      const enriched = await Promise.all(\n        history.progressEntries.map(async (entry: any) => {\n          let photoBase64: string | null = null\n          if (entry.photoPath) {\n            const absPath = path.join(vaultPath, entry.photoPath)\n            photoBase64 = await fileToDataURI(absPath)\n          }\n          return { ...entry, photoBase64 }\n        })\n      )\n\n      // Sort newest first\n      enriched.sort((a: any, b: any) => \n        new Date(b.date).getTime() - new Date(a.date).getTime()\n      )\n\n      log('[IPC] Returning', enriched.length, 'progress entries')\n      return { success: true, entries: enriched }\n    } catch (error) {\n      logError('[IPC] history:get-all error:', error)\n      return { success: false, error: (error as Error).message }\n    }\n  })\n\n  // \u2500\u2500 History: delete entry \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  ipcMain.handle('history:delete-entry', async (_event, vaultPath: string, entryId: string) => {\n    log('[IPC] history:delete-entry called, id:', entryId)\n    try {\n      const historyPath = path.join(vaultPath, 'history.json')\n      const content = await fs.readFile(historyPath, 'utf-8')\n      const history = JSON.parse(content)\n      if (!history.progressEntries) return { success: true }\n\n      // Find and remove entry, also delete photo file\n      const entry = history.progressEntries.find((e: any) => e.id === entryId)\n      if (entry?.photoPath) {\n        const photoAbsPath = path.join(vaultPath, entry.photoPath)\n        try { await fs.unlink(photoAbsPath) } catch { /* ignore */ }\n      }\n\n      history.progressEntries = history.progressEntries.filter((e: any) => e.id !== entryId)\n      await fs.writeFile(historyPath, JSON.stringify(history, null, 2), 'utf-8')\n      return { success: true }\n    } catch (error) {\n      logError('[IPC] history:delete-entry error:', error)\n      return { success: false, error: (error as Error).message }\n    }\n  })\n}\n\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 App Lifecycle \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nregisterIpcHandlers()\n\napp.whenReady().then(() => {\n  createWindow()\n\n  app.on('activate', () => {\n    if (BrowserWindow.getAllWindows().length === 0) createWindow()\n  })\n})\n\napp.on('window-all-closed', () => {\n  if (process.platform !== 'darwin') app.quit()\n})\n"],
  "mappings": "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",
  "names": ["import_fs", "path", "fs"]
}
